import{r as y,j as b}from"./index-fb03fb25.js";import{p as X}from"./index-491b6676.js";function F(a,r){const t=document.querySelector(a),s=r.imagePath,u=r.totalImages,l=r.imageExtension||"jpg";let c=!1,o=0,n=1;function g(e){c=!0,o=e.pageX-t.offsetLeft}function d(){c=!1}function f(e){c==!0&&L(e.pageX-t.offsetLeft)}function h(e){console.log("touchstart : isMoving="+c),c=!0,o=(e.touches[0]||e.changedTouches[0]).clientX}function v(){console.log("touchend : isMoving="+c),c=!1}function p(e){console.log("touchmove : isMoving="+c),e.preventDefault();const i=e.touches[0]||e.changedTouches[0];c==!0?L(i.pageX-t.offsetLeft):o=i.pageX-t.offsetLeft}function x(){t.addEventListener("mousedown",g,!1),t.addEventListener("mousemove",f,!1),t.addEventListener("touchstart",h,!1),t.addEventListener("touchmove",p,!1),document.addEventListener("mouseup",d,!1),document.addEventListener("touchend",v,!1)}function L(e){o-e>25?(console.log("currentX ="+o+" newX ="+e),console.log("currentX-newX="+(o-e)),o=e,n=++n>u?1:n,console.log("currentImage="+n),t.style.backgroundImage="url("+s+n+"."+l+")"):o-e<-25&&(console.log("currentX ="+o+" newX ="+e),console.log("currentX-newX="+(o-e)),o=e,n=--n<1?u:n,console.log("currentImage="+n),t.style.backgroundImage="url("+s+n+"."+l+")")}function k(){let e=1,i=s+"1."+l;t.style.backgroundImage="url("+i+")";for(let m=1;m<=u;m++){i=s+m+"."+l;const E=new Image;E.onload=function(){if(e++,e>=u){const I=document.querySelector("#VCc");I.removeAttribute("class"),I.innerHTML=""}},E.src=i}}function M(){t.innerHTML="<div id='VCc' style='height:100%;width:100%;transition: background 0.3s;' class='d-flex align-center justify-center bg-white'>加载中</div>"}function T(){t.removeEventListener("mousedown",g),t.removeEventListener("mousemove",f),t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",p),document.removeEventListener("mouseup",d),document.removeEventListener("touchend",v)}return M(),k(),x(),{destroy:T}}const P=X+"car/",A=()=>{const a=y.useRef();return y.useEffect(()=>{var r,t;return a.current&&((t=(r=a.current)==null?void 0:r.destroy)==null||t.call(r)),a.current=F("#mulImgWrap",{imagePath:P,totalImages:36,imageExtension:"png"}),function(){var s,u;(u=(s=a.current)==null?void 0:s.destroy)==null||u.call(s)}},[]),b("div",{style:{height:"100%",width:"100%"},className:"d-flex justify-center flex-direction-column",children:b("div",{id:"mulImgWrap",style:{width:"100%",height:"500px",maxHeight:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain",transition:"background 0.1s"}})})};export{A as default};
